---
pagetitle: "DeclareDesign"
page-layout: custom
section-divs: false
toc: false
css: index.css
execute:
  message: false
  error: false
  warning: false
---

::: {.hero-banner}

::: {.content-block}

# Declaring and diagnosing research designs

### DeclareDesign is a set of tools to plan, implement, analyze, and communicate about empirical research

::: {.hero-buttons}
[Get Started](getting-started.html){.btn-action-primary .btn-action .btn .btn-success .btn-lg role="button"}
[Read the Book](https://book.declaredesign.org){#btn-guide .btn-action .btn .btn-info .btn-lg role="button"}
::: 

:::

:::


::: {.hello-quarto .alt-background}
::: {.content-block}

::: {.hello-quarto-banner}

<p style="font-size:25px;padding-top:5px"><b>DeclareDesign in three steps</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
<ul class="nav nav-pills" id="hello-quarto-tab" role="tablist"> 
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="python-tab" data-bs-toggle="tab" data-bs-target="#python" type="button" role="tab" aria-controls="python" aria-selected="true">Declare</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="knitr-tab" data-bs-toggle="tab" data-bs-target="#knitr" type="button" role="tab" aria-controls="knitr" aria-selected="false">Diagnose</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="julia-tab" data-bs-toggle="tab" data-bs-target="#julia" type="button" role="tab" aria-controls="julia" aria-selected="false">Redesign</button>
  </li>
</ul>
</p>
:::

<div class="tab-content" id="hello-quarto-tabcontent">

<div class="tab-pane fade  show active" id="python" role="tabpanel" aria-labelledby="python-tab">

Declaring a design means writing down each component of a research design --- the model, an inquiry about the model, a data strategy to generate data, and an answer strategy to take the data and return an answer to the inquiry. 

::: {.grid}
::: {.g-col-lg-6 .g-col-12}
```{r, echo = FALSE, message = FALSE}
library(tidyverse)
library(knitr)
```
```{r}
library(DeclareDesign)

two_arm_trial <-
  declare_model(N = 100,
                U = rnorm(N),
                potential_outcomes(Y ~ 0.2 * Z + U)) +
  declare_inquiry(ATE = mean(Y_Z_1 - Y_Z_0)) +
  declare_assignment(Z = complete_ra(N, prob = 0.5)) +
  declare_measurement(Y = reveal_outcomes(Y ~ Z)) +
  declare_estimator(Y ~ Z, inquiry = "ATE")
```
:::

::: {.g-col-lg-6 .g-col-12}
```{r, eval = FALSE}
draw_data(two_arm_trial)
```
```{r, echo = FALSE}
draw_data(two_arm_trial) |> head(3) |> kable(digits = 2)
```

```{r, eval = FALSE}
run_design(two_arm_trial)
```
```{r, echo = FALSE}
run_design(two_arm_trial) |> select(estimate, std.error, p.value, inquiry, estimand) |> kable(digits = 2)
```
:::

:::

</div>

<div class="tab-pane fade" id="knitr" role="tabpanel" aria-labelledby="knitr-tab">

Diagnosing a design means simulating the design many times to learn about its properties. Is the design biased? Is there enough statistical power? How often will you get the sign of the effect wrong?

::: {.grid}
::: {.g-col-lg-6 .g-col-12}
```{r, eval = FALSE}
diagnose_design(two_arm_trial)
```
```{r, echo = FALSE}
dx <- diagnose_design(two_arm_trial, sims = 1000)
dx |> get_diagnosands() |> select(bias, sd_estimate, rmse, power, coverage) |> rename_with(~str_replace(str_to_sentence(.), "_", " "), .cols = everything()) |> rename(`SD(estimate)` = `Sd estimate`, `RMSE` = `Rmse`) |> kable(digits = 2)
```
:::

::: {.g-col-lg-6 .g-col-12}
```{r dev.args = list(bg = 'transparent')}
#| fig.width: 5
#| fig.height: 3
#| echo: false
sims <- dx |> get_simulations() 
diagnosands <- dx |> get_diagnosands()
ggplot(sims, aes(estimate)) + 
  geom_histogram(color = NA, fill = "#72B4F3") + 
  geom_vline(data = diagnosands, aes(xintercept = mean_estimate), color = gray(0.1), lty = "dashed") + 
  geom_vline(data = diagnosands, aes(xintercept = mean_estimand), color = "#C6227F", lwd = 1.25) + 
  annotate("text", x = diagnosands$mean_estimand + 0.025, y = 100, hjust = 0, label = "Estimand", color = "#C6227F") +   
  annotate("text", x = diagnosands$mean_estimate - 0.025, y = 100, hjust = 1, label = "Average estimate", color = gray(0.1)) + 
  labs(x = "Simulation sampling distribution of estimator", y = "Density") + 
  theme_minimal()
```
:::

:::

</div>

<div class="tab-pane fade" id="julia" role="tabpanel" aria-labelledby="julia-tab">

Redesigning means exploring how design choices like the number of clusters sampled change the *diagnosands* (properties) of the design. 

::: {.grid}
::: {.g-col-lg-6 .g-col-12}
````markdown
redesign()
````
:::

<!-- ::: {.hello-output .g-col-lg-6 .g-col-12} -->
<!-- ![](images/hello-julia.png){fig-alt="Example Plots Demo output with title, author, date published and main section on Parametric plots which contains text, a toggleable code field, and the output of the plot, with the caption Figure 1 Parametric Plots."} -->
<!-- ::: -->

:::

</div>

</div>



::: {.grid}


:::
:::
:::


<!-- grid of content -->

::: {.content-block}
::: {.features}

::: {.feature}
### Dynamic Documents
Generate dynamic output using Python, R, Julia, and Observable. Create reproducible documents that can be regenerated when underlying assumptions or data change.

::: {.learn-more}
[Learn more »](docs/computations/python.qmd)
:::
:::

::: {.feature}
### Beautiful Publications
Publish high-quality articles, reports, presentations, websites, and books in HTML, PDF, MS Word, ePub, and more. Use a single source document to target multiple formats.

::: {.learn-more}
[Learn more »](docs/output-formats/all-formats.qmd)
:::
:::

::: {.feature}
### Scientific Markdown
Pandoc markdown has excellent support for LaTeX equations and citations. Quarto adds extensions for cross-references, figure panels, callouts, advanced page layout, and more.

::: {.learn-more}
[Learn more »](docs/authoring/markdown-basics.qmd)
:::
:::

::: {.feature}
### Authoring Tools
Use your favorite tools including VS Code, RStudio, Jupyter Lab, or any text editor. Use the Quarto visual markdown editor for long-form documents.

::: {.learn-more}
[Learn more »](docs/tools/jupyter-lab.qmd)
:::
:::

::: {.feature}
### Interactivity
Engage readers by adding interactive data exploration to your documents using Jupyter Widgets, htmlwidgets for R, Observable JS, and Shiny.

::: {.learn-more}
[Learn more »](docs/interactive/)
:::
:::

::: {.feature}
### Websites and Books
Publish collections of documents as a blog or full website. Create books and manuscripts in both print formats (PDF and MS Word) and online formats (HTML and ePub).

::: {.learn-more}
[Learn more »](docs/websites/)
:::
:::

:::
:::


::: {.get-started .alt-background}
::: {.content-block}

### Declare and diagnose your research design -- to assess, improve, and communicate about your design

[Get Started](getting_started.html){.btn-action-primary  .btn-action .btn .btn-success .btn-lg role="button"}

:::
:::
