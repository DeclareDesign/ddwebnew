<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="DesignLibrary">
<title>Block-Cluster-Two-Arm Design • DesignLibrary</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Block-Cluster-Two-Arm Design">
<meta property="og:description" content="DesignLibrary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">DesignLibrary</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.10</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/How_to_Write_and_Contribute_Designers.html">How to Write and Contribute Designers</a>
    <a class="dropdown-item" href="../articles/How_to_Write_and_Contribute_Designs.html">How to Write and Contribute Designs</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-software">Software</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-software">
    <a class="external-link dropdown-item" href="http://declaredesign.org/r/declaredesign/">DeclareDesign</a>
    <a class="external-link dropdown-item" href="https://declaredesign.org/r/randomizr/">randomizr</a>
    <a class="external-link dropdown-item" href="https://declaredesign.org/r/fabricatr/">fabricatr</a>
    <a class="external-link dropdown-item" href="https://declaredesign.org/r/estimatr/">estimatr</a>
    <a class="dropdown-item" href="https://declaredesign.org/r/designlibrary/">DesignLibrary</a>
    <a class="external-link dropdown-item" href="https://eos.wzb.eu/ipi/DDWizard/">DesignWizard</a>
  </div>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://declaredesign.org">declaredesign.org</a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="block_cluster_two_arm_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Block-Cluster-Two-Arm Design</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/DeclareDesign/DesignLibrary/blob/HEAD/../vignettes/block_cluster_two_arm.Rmd" class="external-link"><code>../vignettes/block_cluster_two_arm.Rmd</code></a></small>
      <div class="d-none name"><code>block_cluster_two_arm.Rmd</code></div>
    </div>

    
    
<p>Blocked cluster designs involve units that are grouped into clusters which are in turn grouped into blocks.</p>
<p>The clusters are assigned as a group to either treatment or control. When the clusters are of equal size the difference-in-means estimator yields unbiased but possibly imprecise estimates, especially when individuals are very similar within clusters and share characteristics that can potentially influence outcomes.</p>
<p>In addition (optionally) clusters are assigned within blocks. Ideally clusters within a block are similar. For instance blocks might be formed on the basis of pre-treatment covariates. Treatment is then assigned <em>within</em> each block. Two main objectives can be achieved with block randomization: first, we can reduce sampling variability when individuals that belong to a specific block have similar potential outcomes. Secondly, we can ensure that certain characteristics that we care about are present at a particular rate in our treatment and control samples. For instance, policymakers might be interested in having an equal number of women and men in treatment and control. By defining one block as men and another as women and conducting the randomization separately for each gender, we can ensure that exactly half of the men and half of the women are treated.</p>
<p>As a rule of thumb having blocks improves precision but having clusters weakens precision. Despite their drawbacks, cluster designs are sometimes unavoidable. For instance, imagine that we want to evaluate the effects of radio advertisements on donations to aid relief campaigns. It is, of course, impossible to target such advertising to a single individual, and the treatment must instead be assigned at a higher level; for instance at the city level.</p>
<div class="section level2">
<h2 id="design-declaration">Design Declaration<a class="anchor" aria-label="anchor" href="#design-declaration"></a>
</h2>
<ul>
<li>
<p><strong>M</strong>odel:</p>
<p>We specify a population of <code>N</code> units partitioned into <code>N_blocks</code> (regions, say). Each block has <code>N_clusters_in_block</code> clusters (cities, say) and within each cluster there are <code>N_in_cluster</code> individuals. The variance of an individual’s outcomes has three components: the block’s variance, the cluster’s variance and the subject’s variance.</p>
</li>
<li>
<p><strong>I</strong>nquiry:</p>
<p>We are interested in the average difference in individuals’ treatment and control outcomes, <span class="math inline">\(E[Y_i(Z = 1) - Y_i(Z = 0)]\)</span>.</p>
</li>
<li>
<p><strong>D</strong>ata strategy:</p>
<p>The units of randomization are cities (clusters). Cities are blocked by region so that we ensure that equal numbers of cities from each region are included in control and in treatment. All individuals belonging to the same city are either treated or assigned to control.</p>
</li>
<li>
<p><strong>A</strong>nswer strategy:</p>
<p>We estimate the average treatment effect using a linear model that accounts for block structure and clusters.</p>
</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">N_blocks</span> <span class="op">&lt;-</span> <span class="fl">4</span></span>
<span><span class="va">N_clusters_in_block</span> <span class="op">&lt;-</span> <span class="fl">4</span></span>
<span><span class="va">N_i_in_cluster</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span><span class="va">sd_block</span> <span class="op">&lt;-</span> <span class="fl">0.5773</span></span>
<span><span class="va">sd_cluster</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="va">sd_i_0</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="va">sd_i_1</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="va">rho</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">assignment_probs</span> <span class="op">&lt;-</span> <span class="fl">0.5</span></span>
<span><span class="va">control_mean</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="va">treatment_mean</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="va">verbose</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></span>
<span></span>
<span><span class="va">population</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_population.html" class="external-link">declare_population</a></span><span class="op">(</span>blocks <span class="op">=</span> <span class="fu"><a href="https://declaredesign.org/r/fabricatr/reference/fabricate.html" class="external-link">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="va">N_blocks</span>, </span>
<span>    u_b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">N</span><span class="op">)</span> <span class="op">*</span> <span class="va">sd_block</span><span class="op">)</span>, clusters <span class="op">=</span> <span class="fu"><a href="https://declaredesign.org/r/fabricatr/reference/fabricate.html" class="external-link">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="va">N_clusters_in_block</span>, </span>
<span>    u_c <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">N</span><span class="op">)</span> <span class="op">*</span> <span class="va">sd_cluster</span>, cluster_size <span class="op">=</span> <span class="va">N_i_in_cluster</span><span class="op">)</span>, </span>
<span>    i <span class="op">=</span> <span class="fu"><a href="https://declaredesign.org/r/fabricatr/reference/fabricate.html" class="external-link">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="va">N_i_in_cluster</span>, u_0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">N</span><span class="op">)</span> <span class="op">*</span> <span class="va">sd_i_0</span>, </span>
<span>        u_1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">N</span>, mean <span class="op">=</span> <span class="va">rho</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">u_0</span><span class="op">)</span>, sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">-</span> </span>
<span>            <span class="va">rho</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">*</span> <span class="va">sd_i_1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">potential_outcomes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_potential_outcomes.html" class="external-link">declare_potential_outcomes</a></span><span class="op">(</span><span class="va">Y</span> <span class="op">~</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> </span>
<span>    <span class="va">Z</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="va">control_mean</span> <span class="op">+</span> <span class="va">u_0</span> <span class="op">+</span> <span class="va">u_b</span> <span class="op">+</span> <span class="va">u_c</span><span class="op">)</span> <span class="op">+</span> <span class="va">Z</span> <span class="op">*</span> <span class="op">(</span><span class="va">treatment_mean</span> <span class="op">+</span> </span>
<span>    <span class="va">u_1</span> <span class="op">+</span> <span class="va">u_b</span> <span class="op">+</span> <span class="va">u_c</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">estimand</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_inquiry.html" class="external-link">declare_inquiry</a></span><span class="op">(</span>ATE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">Y_Z_1</span> <span class="op">-</span> <span class="va">Y_Z_0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">assignment</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_assignment.html" class="external-link">declare_assignment</a></span><span class="op">(</span>Z <span class="op">=</span> <span class="fu"><a href="https://declaredesign.org/r/randomizr/reference/block_and_cluster_ra.html" class="external-link">block_and_cluster_ra</a></span><span class="op">(</span>block_prob <span class="op">=</span> <span class="va">assignment_probs</span>, </span>
<span>    blocks <span class="op">=</span> <span class="va">blocks</span>, clusters <span class="op">=</span> <span class="va">clusters</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">reveal</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_reveal.html" class="external-link">declare_reveal</a></span><span class="op">(</span><span class="va">Y</span>, <span class="va">Z</span><span class="op">)</span></span>
<span><span class="va">estimator</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_estimator.html" class="external-link">declare_estimator</a></span><span class="op">(</span><span class="va">Y</span> <span class="op">~</span> <span class="va">Z</span>, inquiry <span class="op">=</span> <span class="va">estimand</span>, </span>
<span>    model <span class="op">=</span> <span class="va">lm_robust</span>, fixed_effects <span class="op">=</span> <span class="op">~</span><span class="va">blocks</span>, clusters <span class="op">=</span> <span class="va">clusters</span><span class="op">)</span></span>
<span><span class="va">block_cluster_two_arm_design</span> <span class="op">&lt;-</span> <span class="va">population</span> <span class="op">+</span> <span class="va">potential_outcomes</span> <span class="op">+</span> </span>
<span>    <span class="va">estimand</span> <span class="op">+</span> <span class="va">assignment</span> <span class="op">+</span> <span class="va">reveal</span> <span class="op">+</span> <span class="va">estimator</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="takeaways">Takeaways<a class="anchor" aria-label="anchor" href="#takeaways"></a>
</h2>
<p>To better illustrate how different sources of variance differentially affect our power, we compare three designs. Each of them features a design with 50 blocks featuring two clusters each, with 10 individuals per cluster. In each design the effect size is .25 and the standard deviation in the outcome is 1 (when possible the designer defaults to a variance for the individual shock such that total variance =1). In the first, all of the variance derives from differences between individuals, in the second it derives from differences between clusters, and in the third it derives from variance between blocks.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">individual_var</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/block_cluster_two_arm_designer.html">block_cluster_two_arm_designer</a></span><span class="op">(</span>N_blocks <span class="op">=</span> <span class="fl">50</span>, </span>
<span>                                                 N_clusters_in_block <span class="op">=</span> <span class="fl">2</span>, </span>
<span>                                                 N_i_in_cluster <span class="op">=</span> <span class="fl">10</span>, </span>
<span>                                                 sd_block <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                                                 sd_cluster <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                                                 ate <span class="op">=</span> <span class="fl">.25</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "The implied ICC in (control) is 0"</span></span>
<span><span class="co">## [1] "The implied ICC in (control) conditional on block is  0"</span></span></code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cluster_var</span>   <span class="op">&lt;-</span> <span class="fu"><a href="../reference/block_cluster_two_arm_designer.html">block_cluster_two_arm_designer</a></span><span class="op">(</span>N_blocks <span class="op">=</span> <span class="fl">50</span>, </span>
<span>                                                 N_clusters_in_block <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                                                 N_i_in_cluster <span class="op">=</span> <span class="fl">10</span>, </span>
<span>                                                 sd_block <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                                                 sd_cluster <span class="op">=</span> <span class="fl">.99</span>,</span>
<span>                                                 ate <span class="op">=</span> <span class="fl">.25</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "The implied ICC in (control) is 0.98"</span></span>
<span><span class="co">## [1] "The implied ICC in (control) conditional on block is  0.98"</span></span></code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">block_var</span>     <span class="op">&lt;-</span> <span class="fu"><a href="../reference/block_cluster_two_arm_designer.html">block_cluster_two_arm_designer</a></span><span class="op">(</span>N_blocks <span class="op">=</span> <span class="fl">50</span>, </span>
<span>                                                 N_clusters_in_block <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                                                 N_i_in_cluster <span class="op">=</span> <span class="fl">10</span>, </span>
<span>                                                 sd_block <span class="op">=</span> <span class="fl">.99</span>,</span>
<span>                                                 sd_cluster <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                                                 ate <span class="op">=</span> <span class="fl">.25</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "The implied ICC in (control) is 0.98"</span></span>
<span><span class="co">## [1] "The implied ICC in (control) conditional on block is  0"</span></span></code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diagnosis</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/diagnose_design.html" class="external-link">diagnose_design</a></span><span class="op">(</span><span class="va">individual_var</span>, <span class="va">cluster_var</span>, <span class="va">block_var</span>, sims <span class="op">=</span> <span class="fl">25</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: We recommend you choose a number of simulations higher than 30.</span></span></code></pre>
<pre><code><span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span></code></pre>
<pre><code><span><span class="co">## Warning: We recommend you choose a number of simulations higher than 30.</span></span></code></pre>
<pre><code><span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span></code></pre>
<pre><code><span><span class="co">## Warning: We recommend you choose a number of simulations higher than 30.</span></span></code></pre>
<pre><code><span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ Z), fixed_effects = ~~blocks, clusters = ~clusters, :</span></span>
<span><span class="co">## The argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span></code></pre>
<table class="table">
<thead><tr class="header">
<th align="left">Estimator</th>
<th align="left">Mean Estimand</th>
<th align="left">Mean Estimate</th>
<th align="left">Bias</th>
<th align="left">SD Estimate</th>
<th align="left">RMSE</th>
<th align="left">Power</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">estimator</td>
<td align="left">0.25</td>
<td align="left">0.26</td>
<td align="left">0.01</td>
<td align="left">0.07</td>
<td align="left">0.06</td>
<td align="left">0.92</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">(0.01)</td>
<td align="left">(0.01)</td>
<td align="left">(0.01)</td>
<td align="left">(0.01)</td>
<td align="left">(0.01)</td>
<td align="left">(0.06)</td>
</tr>
<tr class="odd">
<td align="left">estimator</td>
<td align="left">0.25</td>
<td align="left">0.23</td>
<td align="left">-0.02</td>
<td align="left">0.17</td>
<td align="left">0.17</td>
<td align="left">0.20</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">(0.00)</td>
<td align="left">(0.03)</td>
<td align="left">(0.03)</td>
<td align="left">(0.02)</td>
<td align="left">(0.02)</td>
<td align="left">(0.07)</td>
</tr>
<tr class="odd">
<td align="left">estimator</td>
<td align="left">0.25</td>
<td align="left">0.25</td>
<td align="left">-0.00</td>
<td align="left">0.01</td>
<td align="left">0.01</td>
<td align="left">1.00</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">(0.00)</td>
<td align="left">(0.00)</td>
<td align="left">(0.00)</td>
<td align="left">(0.00)</td>
<td align="left">(0.00)</td>
<td align="left">(0.00)</td>
</tr>
</tbody>
</table>
<p>Diagnosis reveals that the efficiency is greatest when variance comes from blocks, and lowest when it comes from clusters. The reason for this is that our estimator models block-level variance, and can estimate the treatment effect independently from block-level effects because treatment assignment is orthogonal to blocks. However, any variance at the cluster level covaries with our treatment, and thus makes it harder to estimate the treatment effect.</p>
</div>
<div class="section level2 unnumbered">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references">
<div id="ref-Gerber2012">
<p>Gerber, Alan S., and Donald P. Green. 2012. <em>Field Experiments: Design, Analysis, and Interpretation</em>. New York: W.W. Norton.</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Graeme Blair, Jasper Cooper, Alexander Coppock, Macartan Humphreys, Clara Bicalho, Neal Fultz, Lily Medina.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
