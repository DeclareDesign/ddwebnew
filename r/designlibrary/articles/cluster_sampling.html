<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="DesignLibrary">
<title>Cluster Sampling â€¢ DesignLibrary</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Cluster Sampling">
<meta property="og:description" content="DesignLibrary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">DesignLibrary</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.10</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/How_to_Write_and_Contribute_Designers.html">How to Write and Contribute Designers</a>
    <a class="dropdown-item" href="../articles/How_to_Write_and_Contribute_Designs.html">How to Write and Contribute Designs</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-software">Software</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-software">
    <a class="external-link dropdown-item" href="http://declaredesign.org/r/declaredesign/">DeclareDesign</a>
    <a class="external-link dropdown-item" href="https://declaredesign.org/r/randomizr/">randomizr</a>
    <a class="external-link dropdown-item" href="https://declaredesign.org/r/fabricatr/">fabricatr</a>
    <a class="external-link dropdown-item" href="https://declaredesign.org/r/estimatr/">estimatr</a>
    <a class="dropdown-item" href="https://declaredesign.org/r/designlibrary/">DesignLibrary</a>
    <a class="external-link dropdown-item" href="https://eos.wzb.eu/ipi/DDWizard/">DesignWizard</a>
  </div>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://declaredesign.org">declaredesign.org</a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="cluster_sampling_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Cluster Sampling</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/DeclareDesign/DesignLibrary/blob/HEAD/../vignettes/cluster_sampling.Rmd" class="external-link"><code>../vignettes/cluster_sampling.Rmd</code></a></small>
      <div class="d-none name"><code>cluster_sampling.Rmd</code></div>
    </div>

    
    
<p>Researchers often cannot randomly sample at the individual level because it may, among other reasons, be too costly or logistically impractical. Instead, they may choose to randomly sample households, political precincts, or any group of individuals in order to draw inferences about the population. This strategy may be cheaper and simpler but may also introduce risks of less precise estimates.</p>
<!-- Include reference to simple random sampling vignette below -->
<!-- In *Simple Random Sampling*, we discused the example of estimating the average political ideology in Portola, California. Consider instead  -->
<p>Say we are interested in the average party ideology in the entire state of California. Using cluster sampling, we randomly sample counties within the state, and within each selected county, randomly sample individuals to survey.</p>
<p>Assuming enough variation in the outcome of interest, the random assignment of equal-sized clusters yields unbiased but imprecise estimates. By sampling clusters, we select groups of individuals who may share common attributes. Unlike simple random sampling, we need to take account of this intra-cluster correlation in our estimation of the standard error.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;The intra-cluster correlation coefficient (ICC) can be calculated directly and is a feature of this design.&lt;/p&gt;"><sup>1</sup></a> The higher the degree of within-cluster similarity, the more variance we observe in cluster-level averages and the more imprecise are our estimates.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;In ordinary least square (OLS) models, we assume errors are independent (error terms between individual observations are uncorrelated with each other) and homoskedastic (the size of errors is homogeneous across individuals). In reality, this is often not the case with cluster sampling.&lt;/p&gt;"><sup>2</sup></a> We address this by considering cluster-robust standard errors in our answer strategy below.</p>
<div class="section level2">
<h2 id="design-declaration">Design Declaration<a class="anchor" aria-label="anchor" href="#design-declaration"></a>
</h2>
<ul>
<li>
<p><strong>M</strong>odel:</p>
<p>We specify the variable of interest <span class="math inline">\(Y\)</span> (political ideology, say) as a discrete variable ranging from 1 (most liberal) to 7 (most conservative). We do not define a functional model since we are interested in the population mean of <span class="math inline">\(Y\)</span>. The model also includes information about the number of sampled clusters and the number of individuals per cluster.</p>
</li>
<li>
<p><strong>I</strong>nquiry:</p>
<p>Our estimand is the population mean of political identification <span class="math inline">\(Y\)</span>. Because we employed random sampling, we can expect the value of the sample mean (<span class="math inline">\(\widehat{\overline{y}}\)</span>) to approximate the true population parameter (<span class="math inline">\(\widehat{\overline{Y}}\)</span>).</p>
</li>
<li>
<p><strong>D</strong>ata strategy:</p>
<p>Sampling follows a two-stage strategy. We first draw a random sample 30 counties in California, and in each county select 20 individuals at random. This guarantees that each county has the same probability of being included in the sample and each resident within a county the same probability of being in the sample. In this design we estimate <span class="math inline">\(Y\)</span> for n = 600 respondents.</p>
</li>
<li>
<p><strong>A</strong>nswer strategy:</p>
<p>We estimate the population mean with the sample mean estimator: <span class="math inline">\(\widehat{\overline{Y}} = \frac{1}{n} \sum_1^n Y_i\)</span>, and estimate standard errors under the assumption of independent and heteroskedastic errors as well as cluster-robust standard errors to take into account correlation of errors within clusters. Below we demonstrate the the imprecision of our estimated <span class="math inline">\(\widehat{\overline{Y}}\)</span> when we cluster standard errors and when we do not in the presence of an intracluster correlation coefficient (ICC) of 0.402.</p>
</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">N_blocks</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">N_clusters_in_block</span> <span class="op">&lt;-</span> <span class="fl">1000</span></span>
<span><span class="va">N_i_in_cluster</span> <span class="op">&lt;-</span> <span class="fl">50</span></span>
<span><span class="va">n_clusters_in_block</span> <span class="op">&lt;-</span> <span class="fl">30</span></span>
<span><span class="va">n_i_in_cluster</span> <span class="op">&lt;-</span> <span class="fl">20</span></span>
<span><span class="va">icc</span> <span class="op">&lt;-</span> <span class="fl">0.402</span></span>
<span></span>
<span><span class="va">fixed_pop</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_population.html" class="external-link">declare_population</a></span><span class="op">(</span>block <span class="op">=</span> <span class="fu"><a href="https://declaredesign.org/r/fabricatr/reference/fabricate.html" class="external-link">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="va">N_blocks</span><span class="op">)</span>, </span>
<span>    cluster <span class="op">=</span> <span class="fu"><a href="https://declaredesign.org/r/fabricatr/reference/fabricate.html" class="external-link">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="va">N_clusters_in_block</span><span class="op">)</span>, subject <span class="op">=</span> <span class="fu"><a href="https://declaredesign.org/r/fabricatr/reference/fabricate.html" class="external-link">add_level</a></span><span class="op">(</span>N <span class="op">=</span> <span class="va">N_i_in_cluster</span>, </span>
<span>        latent <span class="op">=</span> <span class="fu"><a href="https://declaredesign.org/r/fabricatr/reference/draw_normal_icc.html" class="external-link">draw_normal_icc</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">0</span>, N <span class="op">=</span> <span class="va">N</span>, clusters <span class="op">=</span> <span class="va">cluster</span>, </span>
<span>            ICC <span class="op">=</span> <span class="va">icc</span><span class="op">)</span>, Y <span class="op">=</span> <span class="fu"><a href="https://declaredesign.org/r/fabricatr/reference/draw_discrete.html" class="external-link">draw_ordered</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">latent</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">qnorm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, </span>
<span>            <span class="fl">1</span>, length.out <span class="op">=</span> <span class="fl">8</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">population</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_population.html" class="external-link">declare_population</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">fixed_pop</span><span class="op">)</span></span>
<span><span class="va">estimand</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_inquiry.html" class="external-link">declare_inquiry</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">Y</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"Ybar"</span><span class="op">)</span></span>
<span><span class="va">stage_1_sampling</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_sampling.html" class="external-link">declare_sampling</a></span><span class="op">(</span>S1 <span class="op">=</span> <span class="fu"><a href="https://declaredesign.org/r/randomizr/reference/strata_and_cluster_rs.html" class="external-link">strata_and_cluster_rs</a></span><span class="op">(</span>strata <span class="op">=</span> <span class="va">block</span>, </span>
<span>    clusters <span class="op">=</span> <span class="va">cluster</span>, n <span class="op">=</span> <span class="va">n_clusters_in_block</span><span class="op">)</span>, filter <span class="op">=</span> <span class="va">S1</span> <span class="op">==</span> </span>
<span>    <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">stage_2_sampling</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_sampling.html" class="external-link">declare_sampling</a></span><span class="op">(</span>S2 <span class="op">=</span> <span class="fu"><a href="https://declaredesign.org/r/randomizr/reference/strata_rs.html" class="external-link">strata_rs</a></span><span class="op">(</span>strata <span class="op">=</span> <span class="va">cluster</span>, </span>
<span>    n <span class="op">=</span> <span class="va">n_i_in_cluster</span><span class="op">)</span>, filter <span class="op">=</span> <span class="va">S2</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">clustered_ses</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_estimator.html" class="external-link">declare_estimator</a></span><span class="op">(</span><span class="va">Y</span> <span class="op">~</span> <span class="fl">1</span>, model <span class="op">=</span> <span class="va">lm_robust</span>, </span>
<span>    clusters <span class="op">=</span> <span class="va">cluster</span>, inquiry <span class="op">=</span> <span class="va">estimand</span>, label <span class="op">=</span> <span class="st">"Clustered Standard Errors"</span><span class="op">)</span></span>
<span><span class="va">cluster_sampling_design</span> <span class="op">&lt;-</span> <span class="va">population</span> <span class="op">+</span> <span class="va">estimand</span> <span class="op">+</span> <span class="va">stage_1_sampling</span> <span class="op">+</span> </span>
<span>    <span class="va">stage_2_sampling</span> <span class="op">+</span> <span class="va">clustered_ses</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="takeaways">Takeaways<a class="anchor" aria-label="anchor" href="#takeaways"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diagnosis</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/diagnose_design.html" class="external-link">diagnose_design</a></span><span class="op">(</span><span class="va">cluster_sampling_design</span>, sims <span class="op">=</span> <span class="fl">25</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: We recommend you choose a number of simulations higher than 30.</span></span></code></pre>
<pre><code><span><span class="co">## Warning in fn(data, ~(Y ~ 1), clusters = ~cluster, model = ~lm_robust): The</span></span>
<span><span class="co">## argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ 1), clusters = ~cluster, model = ~lm_robust): The</span></span>
<span><span class="co">## argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ 1), clusters = ~cluster, model = ~lm_robust): The</span></span>
<span><span class="co">## argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ 1), clusters = ~cluster, model = ~lm_robust): The</span></span>
<span><span class="co">## argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ 1), clusters = ~cluster, model = ~lm_robust): The</span></span>
<span><span class="co">## argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ 1), clusters = ~cluster, model = ~lm_robust): The</span></span>
<span><span class="co">## argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ 1), clusters = ~cluster, model = ~lm_robust): The</span></span>
<span><span class="co">## argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ 1), clusters = ~cluster, model = ~lm_robust): The</span></span>
<span><span class="co">## argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ 1), clusters = ~cluster, model = ~lm_robust): The</span></span>
<span><span class="co">## argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ 1), clusters = ~cluster, model = ~lm_robust): The</span></span>
<span><span class="co">## argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ 1), clusters = ~cluster, model = ~lm_robust): The</span></span>
<span><span class="co">## argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ 1), clusters = ~cluster, model = ~lm_robust): The</span></span>
<span><span class="co">## argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ 1), clusters = ~cluster, model = ~lm_robust): The</span></span>
<span><span class="co">## argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ 1), clusters = ~cluster, model = ~lm_robust): The</span></span>
<span><span class="co">## argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ 1), clusters = ~cluster, model = ~lm_robust): The</span></span>
<span><span class="co">## argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ 1), clusters = ~cluster, model = ~lm_robust): The</span></span>
<span><span class="co">## argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ 1), clusters = ~cluster, model = ~lm_robust): The</span></span>
<span><span class="co">## argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ 1), clusters = ~cluster, model = ~lm_robust): The</span></span>
<span><span class="co">## argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ 1), clusters = ~cluster, model = ~lm_robust): The</span></span>
<span><span class="co">## argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ 1), clusters = ~cluster, model = ~lm_robust): The</span></span>
<span><span class="co">## argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ 1), clusters = ~cluster, model = ~lm_robust): The</span></span>
<span><span class="co">## argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ 1), clusters = ~cluster, model = ~lm_robust): The</span></span>
<span><span class="co">## argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ 1), clusters = ~cluster, model = ~lm_robust): The</span></span>
<span><span class="co">## argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ 1), clusters = ~cluster, model = ~lm_robust): The</span></span>
<span><span class="co">## argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span>
<span></span>
<span><span class="co">## Warning in fn(data, ~(Y ~ 1), clusters = ~cluster, model = ~lm_robust): The</span></span>
<span><span class="co">## argument 'model = ' is deprecated. Please use '.method = ' instead.</span></span></code></pre>
<table class="table">
<thead><tr class="header">
<th align="left">Estimator</th>
<th align="left">Mean Estimand</th>
<th align="left">Mean Estimate</th>
<th align="left">Bias</th>
<th align="left">SD Estimate</th>
<th align="left">RMSE</th>
<th align="left">Power</th>
<th align="left">Coverage</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Clustered Standard Errors</td>
<td align="left">3.99</td>
<td align="left">4.03</td>
<td align="left">0.05</td>
<td align="left">0.25</td>
<td align="left">0.25</td>
<td align="left">1.00</td>
<td align="left">0.96</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">(0.00)</td>
<td align="left">(0.05)</td>
<td align="left">(0.05)</td>
<td align="left">(0.03)</td>
<td align="left">(0.03)</td>
<td align="left">(0.00)</td>
<td align="left">(0.04)</td>
</tr>
</tbody>
</table>
<p>To appreciate the role of clustering better we also plot simulated values of our estimand with standard errors not clustered and with clustered standard errors. To do this we first add an additional estimator to the design that does not take account of clusters.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_design</span> <span class="op">&lt;-</span> <span class="va">cluster_sampling_design</span> <span class="op">+</span> <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/declare_estimator.html" class="external-link">declare_estimator</a></span><span class="op">(</span><span class="va">Y</span> <span class="op">~</span> <span class="fl">1</span>,</span>
<span>                                        model <span class="op">=</span> <span class="va">lm_robust</span>,</span>
<span>                                        inquiry <span class="op">=</span> <span class="va">estimand</span>,</span>
<span>                                        label <span class="op">=</span> <span class="st">"Naive Standard Errors"</span><span class="op">)</span></span>
<span><span class="va">diagnosis</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://declaredesign.org/r/declaredesign/reference/diagnose_design.html" class="external-link">diagnose_design</a></span><span class="op">(</span><span class="va">new_design</span>, sims <span class="op">=</span> <span class="fl">25</span><span class="op">)</span></span></code></pre></div>
<p><img src="cluster_sampling_files/figure-html/plot-1.png" width="700"></p>
<p>The figure above may give us the impression that our estimate with clustered standard errors is less precise, when in fact, it correctly accounts for the uncertainty surrounding our estimates. The blue lines in the graph demonstrate the estimates from simulations which contain our estimand. As our table and graphs show, the share of these simulations over the total number of simulations, also known as coverage, is (correctly) close to 95% in estimations with clustered standard errors and 54% in estimations without clustered standard errors. As expected, the mean estimate itself and the bias is the same in both specifications.</p>
</div>
<div class="section level2 unnumbered">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references">
<div id="ref-murray1998design">
<p>Murray, David M. 1998. <em>Design and Analysis of Group-Randomized Trials</em>. Vol. 29. Monographs in Epidemiology &amp; B.</p>
</div>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Graeme Blair, Jasper Cooper, Alexander Coppock, Macartan Humphreys, Clara Bicalho, Neal Fultz, Lily Medina.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
